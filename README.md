# Виселица (Hangman) - Консольная игра

## Описание проекта

Консольная реализация классической игры "Виселица" на Python с поддержкой двух режимов работы: интерактивного (для пользователя) и неинтерактивного (для тестирования). Игрок пытается угадать загаданное слово по буквам, выбирая категорию и уровень сложности.

## Особенности реализации

✅ **Два режима работы**:
- **Интерактивный режим**: Полноценная игра с графическим интерфейсом в терминале
- **Неинтерактивный режим**: Для автоматического тестирования и скриптов

✅ **Расширенная функциональность**:
- Три категории слов (животные, фрукты, страны)
- Три уровня сложности (лёгкий, средний, сложный)
- Система достижений и статистики
- Механизм подсказок
- Подсчёт очков с бонусами и штрафами
- История матчей

✅ **Качественный код**:
- Чистая архитектура с разделением слоёв
- Полное покрытие тестами
- Обработка ошибок и исключений
- Документирование кода

## Структура проекта

```
src/
├── application/              # Слой приложения
│   ├── config.py            # Конфигурация игры
│   └── game_service.py      # Сервис управления игрой
├── core/                    # Ядро приложения
│   ├── entities.py          # Сущности (Word, GameState и др.)
│   ├── exceptions.py        # Кастомные исключения
│   ├── game.py             # Логика игры "Виселица"
│   └── interfaces.py        # Абстрактные интерфейсы
├── infrastructure/          # Инфраструктурный слой
│   ├── cli_ui.py           # Консольный интерфейс
│   └── storage.py          # Хранилище данных
├── main.py                 # Точка входа
└── tests/                  # Тесты
    ├── test_game.py
    ├── test_game_service.py
    ├── test_interactive.py
    ├── test_main.py
    └── test_non_interactive.py
```

## Установка и запуск

### Требования
- Python 3.8+
- colorama (для цветного вывода в терминале)

### Установка зависимостей
```bash
pip install colorama
```

### Запуск игры

#### Интерактивный режим (основной)
```bash
python -m src.main
```

#### Просмотр статистики
```bash
python -m src.main --stats
```

#### Просмотр категорий
```bash
python -m src.main --categories
```

#### Просмотр слов в категории
```bash
python -m src.main --words животные
```

#### Получение подсказки для слова
```bash
python -m src.main --hint кот
```

#### Неинтерактивный режим (тестовый)
```bash
python -m src.main слово буквы
```

Пример:
```bash
python -m src.main кот кт
# Вывод: к*т;POS
```

## Игровой процесс

### Начало игры
1. Программа предлагает выбрать категорию:
   - Животные
   - Фрукты  
   - Страны

2. Выбор уровня сложности:
   - Лёгкий (7 попыток)
   - Средний (6 попыток)
   - Сложный (4 попытки)

3. Случайный выбор слова из выбранной категории и уровня

### Управление в игре
- **Ввод буквы**: Введите одну букву и нажмите Enter
- **Подсказка**: Введите `hint` для получения подсказки (можно использовать только один раз за игру)
- **Выход**: Ctrl+C для прерывания игры

### Визуализация
После каждого хода отображается:
- Текущее состояние слова (угаданные буквы, скрытые символы *)
- Виселица с человечком (графически)
- Неверно названные буквы
- Количество оставшихся попыток
- Использована ли подсказка

### Система очков
Очки начисляются по формуле:
- Базовые очки: длина слова × 10
- Штраф за ошибки: количество ошибок × 5
- Штраф за подсказку: 20 очков (если использована)
- Бонус за идеальную игру: 50 очков (если нет ошибок и подсказок)

### Достижения
Система включает 10 достижений:
1. **Новичок**: Первая победа
2. **Профи**: 10 побед
3. **Мастер**: 25 побед
4. **Без подсказки**: Выиграть без использования подсказки
5. **С подсказкой**: Выиграть используя подсказку
6. **Спидранер**: Выиграть без единой ошибки
7. **Серия побед**: 5 побед подряд
8. **Упорство**: 10 побед подряд
9. **Высокий счёт**: Набрать более 100 очков в одной игре
10. **На грани**: Выиграть с одной оставшейся попыткой

## Форматы ввода/вывода

### Интерактивный режим
**Ввод**: Одна буква (кириллица) или команда `hint`

**Вывод**: 
```
Категория: животные, Уровень: лёгкий (7 попыток)
Слово: * * *
Виселица: 
  +---+
  |   |
      |
      |
      |
      |
=========
Ошибок: 0/7, Неверные буквы: (нет)
Подсказка: Ещё не использована
```

### Неинтерактивный режим
**Ввод**: два аргумента командной строки
```bash
python -m src.main загаданное_слово угадываемые_буквы
```

**Вывод**: 
```
угаданные_буквы_слова;результат
```
где:
- `угаданные_буквы_слова` - слово с угаданными буквами и звёздочками вместо неугаданных
- `результат` - `POS` (выигрыш) или `NEG` (проигрыш)

Пример:
```bash
python -m src.main кот кт
# Вывод: к*т;POS
```

## Архитектурные особенности

### Принципы проектирования
1. **SOLID**:
   - Single Responsibility: Каждый класс имеет одну ответственность
   - Open/Closed: Классы открыты для расширения, закрыты для изменения
   - Liskov Substitution: Наследники могут заменять родителей
   - Interface Segregation: Мелкие специализированные интерфейсы
   - Dependency Inversion: Зависимость от абстракций

2. **Чистая архитектура**:
   - Независимость бизнес-логики от инфраструктуры
   - Слоистая структура (ядро → приложение → инфраструктура)
   - Инъекция зависимостей

3. **Иммутабельность**:
   - Неизменяемые конфигурации
   - Замороженные датаклассы
   - Защита от случайных изменений состояния

### Ключевые паттерны
- **Фасад** (`GameService`): Упрощённый интерфейс к сложной системе
- **Стратегия**: Разные реализации UI для разных режимов
- **Наблюдатель**: Обновление UI при изменении состояния игры
- **Репозиторий**: Абстракция над хранилищем данных

## Тестирование

### Запуск всех тестов
```bash
python -m pytest tests/
```

### Запуск конкретных тестов
```bash
python -m pytest tests/test_game.py -v
python -m pytest tests/test_game_service.py -v
```

### Типы тестов
1. **Модульные тесты** (`test_game.py`):
   - Тестирование ядра игры
   - Проверка правил и логики

2. **Интеграционные тесты** (`test_game_service.py`):
   - Тестирование сервисного слоя
   - Взаимодействие компонентов

3. **E2E тесты** (`test_main.py`):
   - Тестирование точки входа
   - Проверка аргументов командной строки

## Особенности реализации

### Обработка ошибок
- Кастомные исключения для всех возможных ошибок
- Грейсфул деградация
- Информативные сообщения об ошибках

### Производительность
- Ленивая инициализация конфигурации
- Оптимизированные структуры данных
- Минимальное использование памяти

### Расширяемость
- Простая добавка новых категорий
- Гибкая система уровней сложности
- Модульная архитектура для легкой замены компонентов

---
